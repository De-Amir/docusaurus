<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Deployment: Initial Configuration · Open Power Quality</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta property="og:title" content="Deployment: Initial Configuration · Open Power Quality"/><meta property="og:type" content="website"/><meta property="og:url" content="https://openpowerquality.org/index.html"/><meta property="og:description" content="This chapter documents one-time configuration and setup that must be done prior to service deployment."/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/opq.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://openpowerquality.org/blog/atom.xml" title="Open Power Quality Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://openpowerquality.org/blog/feed.xml" title="Open Power Quality Blog RSS Feed"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.9.0/dist/katex.min.css"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Gugi"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.9.0/dist/katex.min.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible doc separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/opqlogo_white.png" alt="Open Power Quality"/><h2 class="headerTitleWithLogo">Open Power Quality</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/intro-motivation.html" target="_self">Documentation</a></li><li class="siteNavGroupActive"><a href="/docs/other-opportunities.html" target="_self">Opportunities</a></li><li class=""><a href="/blog" target="_self">News</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Deployment</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>Introduction</h3><ul><li class="navListItem"><a class="navItem" href="/docs/intro-motivation.html">Motivation for OPQ</a></li><li class="navListItem"><a class="navItem" href="/docs/intro-power-quality.html">A beginners guide to power quality</a></li><li class="navListItem"><a class="navItem" href="/docs/intro-opq.html">What is OPQ?</a></li></ul></div><div class="navGroup navGroupActive"><h3>User Guide</h3><ul><li class="navListItem"><a class="navItem" href="/docs/userguide-hardware.html">OPQ Box</a></li><li class="navListItem"><a class="navItem" href="/docs/userguide-software.html">OPQ View</a></li></ul></div><div class="navGroup navGroupActive"><h3>OPQ Box</h3><ul><li class="navListItem"><a class="navItem" href="/docs/box-overview.html">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/box-hardware-design.html">Hardware Design</a></li><li class="navListItem"><a class="navItem" href="/docs/box-software-design.html">Software Design</a></li><li class="navListItem"><a class="navItem" href="/docs/box-updater.html">Updater</a></li><li class="navListItem"><a class="navItem" href="/docs/box-manufacturing.html">Manufacturing</a></li></ul></div><div class="navGroup navGroupActive"><h3>OPQ Cloud</h3><ul><li class="navListItem"><a class="navItem" href="/docs/cloud-overview.html">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/cloud-datamodel.html">Data Model</a></li><li class="navListItem"><a class="navItem" href="/docs/cloud-view.html">View</a></li><li class="navListItem"><a class="navItem" href="/docs/cloud-mauka.html">Mauka</a></li><li class="navListItem"><a class="navItem" href="/docs/cloud-makai.html">Makai</a></li><li class="navListItem"><a class="navItem" href="/docs/cloud-health.html">Health</a></li><li class="navListItem"><a class="navItem" href="/docs/cloud-protocol.html">Protocol</a></li></ul></div><div class="navGroup navGroupActive"><h3>Deployment</h3><ul><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/docs/deploy-initial-configuration.html">Initial Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/deploy-mauka.html">Mauka</a></li><li class="navListItem"><a class="navItem" href="/docs/deploy-makai.html">Makai</a></li><li class="navListItem"><a class="navItem" href="/docs/deploy-view.html">View</a></li><li class="navListItem"><a class="navItem" href="/docs/deploy-health.html">Health</a></li></ul></div><div class="navGroup navGroupActive"><h3>Developer Guide</h3><ul><li class="navListItem"><a class="navItem" href="/docs/developerguide-docusaurus.html">Documentation</a></li><li class="navListItem"><a class="navItem" href="/docs/developerguide-virtual-machine.html">VM &amp; Sim</a></li></ul></div><div class="navGroup navGroupActive"><h3>Other</h3><ul><li class="navListItem"><a class="navItem" href="/docs/other-roadmap.html">Roadmap</a></li><li class="navListItem"><a class="navItem" href="/docs/other-opportunities.html">R&amp;D Opportunities</a></li><li class="navListItem"><a class="navItem" href="/docs/other-agile-power-monitoring.html">Agile Power Monitoring for UH</a></li><li class="navListItem"><a class="navItem" href="/docs/other-g1-pilot-study.html">G1 Pilot Study (2014)</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1>Deployment: Initial Configuration</h1></header><article><div><span><p>This chapter documents one-time configuration and setup that must be done prior to service deployment.</p>
<h2><a class="anchor" aria-hidden="true" id="server-setup"></a><a href="#server-setup" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Server setup</h2>
<h3><a class="anchor" aria-hidden="true" id="install-linux"></a><a href="#install-linux" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Install Linux</h3>
<p>(Indicate what version of Linux we are using, and pointers to directions on how to install on ITS hosts.)</p>
<h3><a class="anchor" aria-hidden="true" id="create-system-and-user-level-accounts"></a><a href="#create-system-and-user-level-accounts" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Create system and user-level accounts</h3>
<p>Create a system account called 'opq' that does not have login privileges. For example,</p>
<pre><code class="hljs">(command <span class="hljs-keyword">to</span> create opq<span class="hljs-built_in"> system </span>account)
</code></pre>
<p>Create a second account called 'opquser' with normal user privileges. For example,</p>
<pre><code class="hljs">(<span class="hljs-name">command</span> to create opquser account)
</code></pre>
<p>For opquser account, create the top-level directories: mauka, makai, view, health, and mongodb.  Deployment scripts and files for each service will be located and maintained within these directories.</p>
<h2><a class="anchor" aria-hidden="true" id="install-mongodb"></a><a href="#install-mongodb" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Install MongoDB</h2>
<p>Copy the <code>install-mongod.sh</code> script found in the <code>opq/util/mongod/install</code> directory to the server you wish to install it on.</p>
<p>As root, run the install script.</p>
<pre><code class="hljs">$ sudo ./<span class="hljs-keyword">install</span>-mongodb.sh 
+ apt-<span class="hljs-keyword">get</span> <span class="hljs-keyword">install</span> -y curl
Reading <span class="hljs-keyword">package</span> lists... Done
Building dependency tree       
Reading state information... Done
curl <span class="hljs-keyword">is</span> already the newest <span class="hljs-keyword">version</span> (<span class="hljs-number">7.52</span><span class="hljs-number">.1</span><span class="hljs-number">-5</span>+deb9u5).
<span class="hljs-number">0</span> upgraded, <span class="hljs-number">0</span> newly installed, <span class="hljs-number">0</span> <span class="hljs-keyword">to</span> remove <span class="hljs-keyword">and</span> <span class="hljs-number">0</span> <span class="hljs-keyword">not</span> upgraded.
+ DIST=mongodb-linux-x86_64<span class="hljs-number">-3.6</span><span class="hljs-number">.3</span>
+ curl -O https://fastdl.mongodb.org/linux/mongodb-linux-x86_64<span class="hljs-number">-3.6</span><span class="hljs-number">.3</span>.tgz
  % Total    % Received % Xferd  Average Speed   <span class="hljs-keyword">Time</span>    <span class="hljs-keyword">Time</span>     <span class="hljs-keyword">Time</span>  <span class="hljs-keyword">Current</span>
                                 Dload  Upload   Total   Spent    <span class="hljs-keyword">Left</span>  Speed
<span class="hljs-number">100</span> <span class="hljs-number">82.8</span>M  <span class="hljs-number">100</span> <span class="hljs-number">82.8</span>M    <span class="hljs-number">0</span>     <span class="hljs-number">0</span>  <span class="hljs-number">13.3</span>M      <span class="hljs-number">0</span>  <span class="hljs-number">0</span>:<span class="hljs-number">00</span>:<span class="hljs-number">06</span>  <span class="hljs-number">0</span>:<span class="hljs-number">00</span>:<span class="hljs-number">06</span> <span class="hljs-comment">--:--:-- 19.3M</span>
+ tar xvf mongodb-linux-x86_64<span class="hljs-number">-3.6</span><span class="hljs-number">.3</span>.tgz
mongodb-linux-x86_64<span class="hljs-number">-3.6</span><span class="hljs-number">.3</span>/README
mongodb-linux-x86_64<span class="hljs-number">-3.6</span><span class="hljs-number">.3</span>/THIRD-PARTY-NOTICES
mongodb-linux-x86_64<span class="hljs-number">-3.6</span><span class="hljs-number">.3</span>/MPL<span class="hljs-number">-2</span>
mongodb-linux-x86_64<span class="hljs-number">-3.6</span><span class="hljs-number">.3</span>/GNU-AGPL<span class="hljs-number">-3.0</span>
mongodb-linux-x86_64<span class="hljs-number">-3.6</span><span class="hljs-number">.3</span>/<span class="hljs-keyword">bin</span>/mongodump
mongodb-linux-x86_64<span class="hljs-number">-3.6</span><span class="hljs-number">.3</span>/<span class="hljs-keyword">bin</span>/mongorestore
mongodb-linux-x86_64<span class="hljs-number">-3.6</span><span class="hljs-number">.3</span>/<span class="hljs-keyword">bin</span>/mongoexport
mongodb-linux-x86_64<span class="hljs-number">-3.6</span><span class="hljs-number">.3</span>/<span class="hljs-keyword">bin</span>/mongoimport
mongodb-linux-x86_64<span class="hljs-number">-3.6</span><span class="hljs-number">.3</span>/<span class="hljs-keyword">bin</span>/mongostat
mongodb-linux-x86_64<span class="hljs-number">-3.6</span><span class="hljs-number">.3</span>/<span class="hljs-keyword">bin</span>/mongotop
mongodb-linux-x86_64<span class="hljs-number">-3.6</span><span class="hljs-number">.3</span>/<span class="hljs-keyword">bin</span>/bsondump
mongodb-linux-x86_64<span class="hljs-number">-3.6</span><span class="hljs-number">.3</span>/<span class="hljs-keyword">bin</span>/mongofiles
mongodb-linux-x86_64<span class="hljs-number">-3.6</span><span class="hljs-number">.3</span>/<span class="hljs-keyword">bin</span>/mongoreplay
mongodb-linux-x86_64<span class="hljs-number">-3.6</span><span class="hljs-number">.3</span>/<span class="hljs-keyword">bin</span>/mongoperf
mongodb-linux-x86_64<span class="hljs-number">-3.6</span><span class="hljs-number">.3</span>/<span class="hljs-keyword">bin</span>/mongod
mongodb-linux-x86_64<span class="hljs-number">-3.6</span><span class="hljs-number">.3</span>/<span class="hljs-keyword">bin</span>/mongos
mongodb-linux-x86_64<span class="hljs-number">-3.6</span><span class="hljs-number">.3</span>/<span class="hljs-keyword">bin</span>/mongo
mongodb-linux-x86_64<span class="hljs-number">-3.6</span><span class="hljs-number">.3</span>/<span class="hljs-keyword">bin</span>/install_compass
+ INSTALL_DIR=/usr/<span class="hljs-keyword">local</span>/<span class="hljs-keyword">bin</span>/mongodb
+ mkdir -p /usr/<span class="hljs-keyword">local</span>/<span class="hljs-keyword">bin</span>/mongodb
+ cp -R -n mongodb-linux-x86_64<span class="hljs-number">-3.6</span><span class="hljs-number">.3</span>/<span class="hljs-keyword">bin</span> mongodb-linux-x86_64<span class="hljs-number">-3.6</span><span class="hljs-number">.3</span>/GNU-AGPL<span class="hljs-number">-3.0</span> mongodb-linux-x86_64<span class="hljs-number">-3.6</span><span class="hljs-number">.3</span>/MPL<span class="hljs-number">-2</span> mongodb-linux-x86_64<span class="hljs-number">-3.6</span><span class="hljs-number">.3</span>/README mongodb-linux-x86_64<span class="hljs-number">-3.6</span><span class="hljs-number">.3</span>/THIRD-PARTY-NOTICES /usr/<span class="hljs-keyword">local</span>/<span class="hljs-keyword">bin</span>/mongodb
+ mkdir -p /<span class="hljs-keyword">var</span>/<span class="hljs-keyword">log</span>/mongodb
+ chown -R opq:opq /<span class="hljs-keyword">var</span>/<span class="hljs-keyword">log</span>/mongodb
+ echo <span class="hljs-string">'export PATH=/usr/local/bin/mongodb/bin:$PATH'</span>
+ DB_BASE=/<span class="hljs-keyword">var</span>/mongodb/opq
+ mkdir -p /<span class="hljs-keyword">var</span>/mongodb/opq/rs0
+ mkdir -p /<span class="hljs-keyword">var</span>/mongodb/opq/rs1
+ mkdir -p /<span class="hljs-keyword">var</span>/mongodb/opq/rs2
+ chown -R opq:opq /<span class="hljs-keyword">var</span>/mongodb/opq
+ echo <span class="hljs-string">'If you want mongo on your path, reload with ". ~/.profile"'</span>
<span class="hljs-keyword">If</span> you want mongo <span class="hljs-keyword">on</span> your <span class="hljs-keyword">path</span>, reload <span class="hljs-keyword">with</span> <span class="hljs-string">". ~/.profile"</span>
+ <span class="hljs-keyword">set</span> +x
</code></pre>
<p>The script works by performing the following steps:</p>
<ol>
<li>Ensure curl is installed using system package manager</li>
<li>Download latest generic mongodb community server using curl</li>
<li>Installs mongodb under /usr/local/bin/mongodb</li>
<li>Creates data directories at /var/mongodb/opq/rs[0-2]</li>
<li>Create log directory at /var/log/mongodb</li>
<li>Set's ownership of data and log dirs to the system level <code>opq</code> user</li>
</ol>
<h3><a class="anchor" aria-hidden="true" id="installing-the-mongodb-service"></a><a href="#installing-the-mongodb-service" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installing the MongoDB service</h3>
<p>This step will install MongoDB as a system level service. This allows MongoDB to be managed by the service daemon and to autostart when the server starts. This step requires three scripts:</p>
<ol>
<li><code>opq/util/mongod/install/install-service.sh</code>: Installs the service file, runs script, and updates the service daemon</li>
<li><code>opq/util/mongod/install/mongod-service.sh</code>: The actual unit file that init.d/systemd uses to run mongod as a service</li>
<li><code>opq/util/mongod/install/start-mongod.sh</code>: The run script that the service uses to start multiple replica sets</li>
</ol>
<h4><a class="anchor" aria-hidden="true" id="copy-service-scripts-to-server"></a><a href="#copy-service-scripts-to-server" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Copy service scripts to server</h4>
<p>First, copy all three scripts to the server that you wish to setup the mongod service. You may use the opquser account to do this. Ensure that all three scripts are siblings in the same directory.</p>
<h4><a class="anchor" aria-hidden="true" id="run-the-install-servicesh-script"></a><a href="#run-the-install-servicesh-script" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Run the install-service.sh script</h4>
<p>As root, run install-service.sh</p>
<pre><code class="hljs">$ sudo ./<span class="hljs-keyword">install</span>-service.sh 
+ cp <span class="hljs-keyword">start</span>-mongod.sh /usr/<span class="hljs-keyword">local</span>/<span class="hljs-keyword">bin</span>/mongodb/.
+ chown opq:opq /usr/<span class="hljs-keyword">local</span>/<span class="hljs-keyword">bin</span>/mongodb/<span class="hljs-keyword">start</span>-mongod.sh
+ chmod +x /usr/<span class="hljs-keyword">local</span>/<span class="hljs-keyword">bin</span>/mongodb/<span class="hljs-keyword">start</span>-mongod.sh
+ cp mongod-service.sh /etc/init.d/mongod
+ chown opq:opq /etc/init.d/mongod
+ chmod +x /etc/init.d/mongod
+ <span class="hljs-keyword">update</span>-rc.d mongod <span class="hljs-keyword">defaults</span>
+ <span class="hljs-keyword">set</span> +x
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="start-the-mongod-service"></a><a href="#start-the-mongod-service" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Start the mongod service</h4>
<p>As root, you should now be able to run the mongod service using <code>/etc/init.d/mongod start</code>.</p>
<pre><code class="hljs"><span class="hljs-selector-tag">sudo</span> /<span class="hljs-selector-tag">etc</span>/<span class="hljs-selector-tag">init</span><span class="hljs-selector-class">.d</span>/<span class="hljs-selector-tag">mongod</span> <span class="hljs-selector-tag">start</span>
<span class="hljs-selector-attr">[ ok ]</span> <span class="hljs-selector-tag">Starting</span> <span class="hljs-selector-tag">mongod</span> (via systemctl): <span class="hljs-selector-tag">mongod</span><span class="hljs-selector-class">.service</span>.
</code></pre>
<p>Please note that as a system service, mongod will also start automatically any time the server is restarted.</p>
<p>To verify that mongod is running with three replica sets, we can look at the process table and select those with mongod in the name.</p>
<pre><code class="hljs">$ ps aux | grep mongod
opq        <span class="hljs-number">673</span>  <span class="hljs-number">0.2</span>  <span class="hljs-number">1.3</span> <span class="hljs-number">1005344</span> <span class="hljs-number">55680</span> ?       Sl   08:<span class="hljs-number">18</span>   <span class="hljs-number">0</span>:<span class="hljs-number">01</span> opq       <span class="hljs-number">2545</span> <span class="hljs-number">12.8</span>  <span class="hljs-number">1.3</span> <span class="hljs-number">1005348</span> <span class="hljs-number">55996</span> ?       Sl   09:<span class="hljs-number">39</span>   <span class="hljs-number">0</span>:<span class="hljs-number">00</span> <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/bin/</span>mongodb<span class="hljs-regexp">/bin/</span>mongod --replSet opqrs --port <span class="hljs-number">27018</span> --dbpath <span class="hljs-regexp">/var/</span>mongodb<span class="hljs-regexp">/opq/</span>rs0 --fork --logpath <span class="hljs-regexp">/var/</span>log<span class="hljs-regexp">/mongodb/</span>rs0.loq
                                                                 opq       <span class="hljs-number">2586</span> <span class="hljs-number">15.0</span>  <span class="hljs-number">1.3</span> <span class="hljs-number">1005348</span> <span class="hljs-number">55228</span> ?       Sl   09:<span class="hljs-number">39</span>   <span class="hljs-number">0</span>:<span class="hljs-number">00</span> <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/bin/</span>mongodb<span class="hljs-regexp">/bin/</span>mongod --replSet opqrs --port <span class="hljs-number">27019</span> --dbpath <span class="hljs-regexp">/var/</span>mongodb<span class="hljs-regexp">/opq/</span>rs1 --fork --logpath <span class="hljs-regexp">/var/</span>log<span class="hljs-regexp">/mongodb/</span>rs1.loq
                                                                 opq       <span class="hljs-number">2618</span> <span class="hljs-number">19.0</span>  <span class="hljs-number">1.3</span> <span class="hljs-number">1005348</span> <span class="hljs-number">55280</span> ?       Sl   09:<span class="hljs-number">39</span>   <span class="hljs-number">0</span>:<span class="hljs-number">00</span> <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/bin/</span>mongodb<span class="hljs-regexp">/bin/</span>mongod --replSet opqrs --port <span class="hljs-number">27020</span> --dbpath <span class="hljs-regexp">/var/</span>mongodb<span class="hljs-regexp">/opq/</span>rs2 --fork --logpath <span class="hljs-regexp">/var/</span>log<span class="hljs-regexp">/mongodb/</span>rs2.loq

</code></pre>
<p>Here we see three mongod processes each running on a different port, each with their oen data directory, and each with their own log file.</p>
<p>At this point in time, it should also be possible to connect to the server from opquser using the mongo command (assuming you've added the mongodb binary to your PATH).</p>
<pre><code class="hljs">$ mongo <span class="hljs-comment">--port 27018</span>
MongoDB shell version v3.6.3
connecting to: mongodb://127.0.0.1:27018/
MongoDB server version: 3.6.3
Welcome to the MongoDB shell.
For interactive <span class="hljs-keyword">help</span>, <span class="hljs-keyword">type</span> <span class="hljs-string">"help"</span>.
<span class="hljs-keyword">For</span> more comprehensive documentation, see
    <span class="hljs-keyword">http</span>://docs.mongodb.org/
Questions? Try the support <span class="hljs-keyword">group</span>
    <span class="hljs-keyword">http</span>://groups.google.com/<span class="hljs-keyword">group</span>/mongodb-<span class="hljs-keyword">user</span>
<span class="hljs-keyword">Server</span> has <span class="hljs-keyword">startup</span> <span class="hljs-keyword">warnings</span>: 
<span class="hljs-number">2018</span><span class="hljs-number">-04</span><span class="hljs-number">-11</span>T08:<span class="hljs-number">18</span>:<span class="hljs-number">04.158</span><span class="hljs-number">-1000</span> I <span class="hljs-keyword">STORAGE</span>  [initandlisten] 
<span class="hljs-number">2018</span><span class="hljs-number">-04</span><span class="hljs-number">-11</span>T08:<span class="hljs-number">18</span>:<span class="hljs-number">04.158</span><span class="hljs-number">-1000</span> I <span class="hljs-keyword">STORAGE</span>  [initandlisten] ** <span class="hljs-keyword">WARNING</span>: <span class="hljs-keyword">Using</span> the XFS filesystem <span class="hljs-keyword">is</span> strongly recommended <span class="hljs-keyword">with</span> the WiredTiger <span class="hljs-keyword">storage</span> <span class="hljs-keyword">engine</span>
<span class="hljs-number">2018</span><span class="hljs-number">-04</span><span class="hljs-number">-11</span>T08:<span class="hljs-number">18</span>:<span class="hljs-number">04.158</span><span class="hljs-number">-1000</span> I <span class="hljs-keyword">STORAGE</span>  [initandlisten] **          See <span class="hljs-keyword">http</span>://dochub.mongodb.org/core/prodnotes-filesystem
<span class="hljs-number">2018</span><span class="hljs-number">-04</span><span class="hljs-number">-11</span>T08:<span class="hljs-number">18</span>:<span class="hljs-number">05.062</span><span class="hljs-number">-1000</span> I CONTROL  [initandlisten] 
<span class="hljs-number">2018</span><span class="hljs-number">-04</span><span class="hljs-number">-11</span>T08:<span class="hljs-number">18</span>:<span class="hljs-number">05.062</span><span class="hljs-number">-1000</span> I CONTROL  [initandlisten] ** <span class="hljs-keyword">WARNING</span>: <span class="hljs-keyword">Access</span> control <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> enabled <span class="hljs-keyword">for</span> the database.
<span class="hljs-number">2018</span><span class="hljs-number">-04</span><span class="hljs-number">-11</span>T08:<span class="hljs-number">18</span>:<span class="hljs-number">05.062</span><span class="hljs-number">-1000</span> I CONTROL  [initandlisten] **          <span class="hljs-keyword">Read</span> <span class="hljs-keyword">and</span> write <span class="hljs-keyword">access</span> <span class="hljs-keyword">to</span> <span class="hljs-keyword">data</span> <span class="hljs-keyword">and</span> configuration <span class="hljs-keyword">is</span> unrestricted.
<span class="hljs-number">2018</span><span class="hljs-number">-04</span><span class="hljs-number">-11</span>T08:<span class="hljs-number">18</span>:<span class="hljs-number">05.062</span><span class="hljs-number">-1000</span> I CONTROL  [initandlisten] 
<span class="hljs-number">2018</span><span class="hljs-number">-04</span><span class="hljs-number">-11</span>T08:<span class="hljs-number">18</span>:<span class="hljs-number">05.062</span><span class="hljs-number">-1000</span> I CONTROL  [initandlisten] ** <span class="hljs-keyword">WARNING</span>: This <span class="hljs-keyword">server</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">bound</span> <span class="hljs-keyword">to</span> localhost.
<span class="hljs-number">2018</span><span class="hljs-number">-04</span><span class="hljs-number">-11</span>T08:<span class="hljs-number">18</span>:<span class="hljs-number">05.062</span><span class="hljs-number">-1000</span> I CONTROL  [initandlisten] **          Remote systems will be unable <span class="hljs-keyword">to</span> <span class="hljs-keyword">connect</span> <span class="hljs-keyword">to</span> this server. 
<span class="hljs-number">2018</span><span class="hljs-number">-04</span><span class="hljs-number">-11</span>T08:<span class="hljs-number">18</span>:<span class="hljs-number">05.062</span><span class="hljs-number">-1000</span> I CONTROL  [initandlisten] **          <span class="hljs-keyword">Start</span> the <span class="hljs-keyword">server</span> <span class="hljs-keyword">with</span> <span class="hljs-comment">--bind_ip &lt;address&gt; to specify which IP </span>
<span class="hljs-number">2018</span><span class="hljs-number">-04</span><span class="hljs-number">-11</span>T08:<span class="hljs-number">18</span>:<span class="hljs-number">05.062</span><span class="hljs-number">-1000</span> I CONTROL  [initandlisten] **          addresses it should serve responses <span class="hljs-keyword">from</span>, <span class="hljs-keyword">or</span> <span class="hljs-keyword">with</span> <span class="hljs-comment">--bind_ip_all to</span>
<span class="hljs-number">2018</span><span class="hljs-number">-04</span><span class="hljs-number">-11</span>T08:<span class="hljs-number">18</span>:<span class="hljs-number">05.062</span><span class="hljs-number">-1000</span> I CONTROL  [initandlisten] **          bind <span class="hljs-keyword">to</span> all interfaces. <span class="hljs-keyword">If</span> this behavior <span class="hljs-keyword">is</span> desired, <span class="hljs-keyword">start</span> the
<span class="hljs-number">2018</span><span class="hljs-number">-04</span><span class="hljs-number">-11</span>T08:<span class="hljs-number">18</span>:<span class="hljs-number">05.062</span><span class="hljs-number">-1000</span> I CONTROL  [initandlisten] **          <span class="hljs-keyword">server</span> <span class="hljs-keyword">with</span> <span class="hljs-comment">--bind_ip 127.0.0.1 to disable this warning.</span>
<span class="hljs-number">2018</span><span class="hljs-number">-04</span><span class="hljs-number">-11</span>T08:<span class="hljs-number">18</span>:<span class="hljs-number">05.062</span><span class="hljs-number">-1000</span> I CONTROL  [initandlisten] 
</code></pre>
<p>You may see some warnings that we can ignore for the time being, but you can also verify that you can connect to the running mongod instance using this approach.</p>
<h3><a class="anchor" aria-hidden="true" id="configuring-mongod-to-support-oplog"></a><a href="#configuring-mongod-to-support-oplog" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Configuring mongod to support oplog</h3>
<p>First, connect to the primary mongod instance</p>
<pre><code class="hljs">$ mongo --port 27018
MongoDB shell version v3.6.3
connecting to: mongodb://127.0.0.1:27018/
MongoDB server version: 3.6.3
Server has startup warnings: 
2018<span class="hljs-string">-04</span><span class="hljs-string">-11</span>T08:18:04.158<span class="hljs-string">-1000</span> I STORAGE  [initandlisten] 
2018<span class="hljs-string">-04</span><span class="hljs-string">-11</span>T08:18:04.158<span class="hljs-string">-1000</span> I STORAGE  [initandlisten] ** WARNING: Using the XFS filesystem is strongly recommended with the WiredTiger storage engine
2018<span class="hljs-string">-04</span><span class="hljs-string">-11</span>T08:18:04.158<span class="hljs-string">-1000</span> I STORAGE  [initandlisten] **          See http://dochub.mongodb.org/core/prodnotes-filesystem
2018<span class="hljs-string">-04</span><span class="hljs-string">-11</span>T08:18:05.062<span class="hljs-string">-1000</span> I CONTROL  [initandlisten] 
2018<span class="hljs-string">-04</span><span class="hljs-string">-11</span>T08:18:05.062<span class="hljs-string">-1000</span> I CONTROL  [initandlisten] ** WARNING: Access control is not enabled for the database.
2018<span class="hljs-string">-04</span><span class="hljs-string">-11</span>T08:18:05.062<span class="hljs-string">-1000</span> I CONTROL  [initandlisten] **          Read and write access to data and configuration is unrestricted.
2018<span class="hljs-string">-04</span><span class="hljs-string">-11</span>T08:18:05.062<span class="hljs-string">-1000</span> I CONTROL  [initandlisten] 
2018<span class="hljs-string">-04</span><span class="hljs-string">-11</span>T08:18:05.062<span class="hljs-string">-1000</span> I CONTROL  [initandlisten] ** WARNING: This server is bound to localhost.
2018<span class="hljs-string">-04</span><span class="hljs-string">-11</span>T08:18:05.062<span class="hljs-string">-1000</span> I CONTROL  [initandlisten] **          Remote systems will be unable to connect to this server. 
2018<span class="hljs-string">-04</span><span class="hljs-string">-11</span>T08:18:05.062<span class="hljs-string">-1000</span> I CONTROL  [initandlisten] **          Start the server with --bind_ip &lt;address&gt; to specify which IP 
2018<span class="hljs-string">-04</span><span class="hljs-string">-11</span>T08:18:05.062<span class="hljs-string">-1000</span> I CONTROL  [initandlisten] **          addresses it should serve responses from, or with --bind_ip_all to
2018<span class="hljs-string">-04</span><span class="hljs-string">-11</span>T08:18:05.062<span class="hljs-string">-1000</span> I CONTROL  [initandlisten] **          bind to all interfaces. If this behavior is desired, start the
2018<span class="hljs-string">-04</span><span class="hljs-string">-11</span>T08:18:05.062<span class="hljs-string">-1000</span> I CONTROL  [initandlisten] **          server with --bind_ip 127.0.0.1 to disable this warning.
2018<span class="hljs-string">-04</span><span class="hljs-string">-11</span>T08:18:05.062<span class="hljs-string">-1000</span> I CONTROL  [initandlisten] 
&gt; 
</code></pre>
<p>Once connected, we can now configure the replica sets. We will first create a config variable:</p>
<pre><code class="hljs">config = {<span class="hljs-string">_id:</span> <span class="hljs-string">"opqrs"</span>, <span class="hljs-string">members:</span> [{<span class="hljs-string">_id:</span> <span class="hljs-number">0</span>, <span class="hljs-string">host:</span> <span class="hljs-string">"localhost:27018"</span>}, {<span class="hljs-string">_id:</span> <span class="hljs-number">1</span>, <span class="hljs-string">host:</span> <span class="hljs-string">"localhost:27019"</span>},{<span class="hljs-string">_id:</span> <span class="hljs-number">2</span>, <span class="hljs-string">host:</span> <span class="hljs-string">"localhost:27020"</span>}]};
</code></pre>
<p>Next, we will initiate the replica set with the config that we just created using <code>rs.initiate(config);</code></p>
<pre><code class="hljs">&gt; rs.initiate(config);
{
    <span class="hljs-string">"ok"</span> : 1,
    <span class="hljs-string">"operationTime"</span> : <span class="hljs-type">Timestamp</span>(<span class="hljs-number">1523475887</span>, <span class="hljs-number">1</span>),
    <span class="hljs-string">"$clusterTime"</span> : {
        <span class="hljs-string">"clusterTime"</span> : <span class="hljs-type">Timestamp</span>(<span class="hljs-number">1523475887</span>, <span class="hljs-number">1</span>),
        <span class="hljs-string">"signature"</span> : {
            <span class="hljs-string">"hash"</span> : <span class="hljs-type">BinData</span>(<span class="hljs-number">0</span>,<span class="hljs-string">"AAAAAAAAAAAAAAAAAAAAAAAAAAA="</span>),
            <span class="hljs-string">"keyId"</span> : <span class="hljs-type">NumberLong</span>(<span class="hljs-number">0</span>)
        }
    }
}
</code></pre>
<p>At this point, you should be ready to go. See the official mongodb documentation if you wish to setup further access rights such as users or permissions.</p>
<h2><a class="anchor" aria-hidden="true" id="install-remaining-tech-stack"></a><a href="#install-remaining-tech-stack" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Install remaining tech stack</h2>
<p>(Document how to install and configure git, apache, mongo, node, etc.)</p>
<h2><a class="anchor" aria-hidden="true" id="set-up-opquser-ssh-access"></a><a href="#set-up-opquser-ssh-access" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Set up opquser ssh access</h2>
<p>Most deployment occurs by running scripts from a development machine to transfer files to the server machine.</p>
<p>For these scripts to run correctly, ssh access to the opquser account on the server must be configured. Here's how to do it.</p>
<h3><a class="anchor" aria-hidden="true" id="obtain-the-opquser-account-credentials"></a><a href="#obtain-the-opquser-account-credentials" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Obtain the opquser account credentials</h3>
<p>OPQView is deployed using the opquser account.  You need to obtain the password for opquser in order to do this deployment.</p>
<h3><a class="anchor" aria-hidden="true" id="set-up-ssh-without-password-prompt"></a><a href="#set-up-ssh-without-password-prompt" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Set up ssh without password prompt</h3>
<p>In order to use the scripts to transfer files, you need to set up SSH login without a password.  You can follow <a href="http://www.linuxproblem.org/art_9.html">these instructions</a>.</p>
<p>To check to make sure you have set up your SSH keys correctly, bring up a new console and run the following command:</p>
<pre><code class="hljs">ssh -<span class="hljs-selector-tag">p</span> <span class="hljs-number">29862</span> opquser@emilia<span class="hljs-selector-class">.ics</span><span class="hljs-selector-class">.hawaii</span><span class="hljs-selector-class">.edu</span>
</code></pre>
<p>This should log you into emilia without prompting you for a password, with output like the following:</p>
<pre><code class="hljs">The programs included <span class="hljs-keyword">with</span> the Debian GNU/Linux system are free software;
the exact distribution terms <span class="hljs-keyword">for</span> each program are described <span class="hljs-keyword">in</span> the
individual files <span class="hljs-keyword">in</span> <span class="hljs-regexp">/usr/share/doc/</span>*/copyright.

Debian GNU/Linux comes <span class="hljs-keyword">with</span> ABSOLUTELY NO WARRANTY, <span class="hljs-keyword">to</span> the extent
permitted <span class="hljs-keyword">by</span> applicable law.
Last login: Sun Apr  <span class="hljs-number">8</span> <span class="hljs-number">07</span>:<span class="hljs-number">57</span>:<span class="hljs-number">57</span> <span class="hljs-number">2018</span> <span class="hljs-keyword">from</span> cpe-<span class="hljs-number">66</span>-<span class="hljs-number">91</span>-<span class="hljs-number">216</span>-<span class="hljs-number">204.hawaii</span>.res.rr.com
opquser@emilia:~$ 
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="cloud-protocol.html">← OPQ Protocol</a><a class="docs-next button" href="deploy-mauka.html">Deployment: Mauka →</a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#server-setup">Server setup</a><ul class="toc-headings"><li><a href="#install-linux">Install Linux</a></li><li><a href="#create-system-and-user-level-accounts">Create system and user-level accounts</a></li></ul></li><li><a href="#install-mongodb">Install MongoDB</a><ul class="toc-headings"><li><a href="#installing-the-mongodb-service">Installing the MongoDB service</a></li><li><a href="#configuring-mongod-to-support-oplog">Configuring mongod to support oplog</a></li></ul></li><li><a href="#install-remaining-tech-stack">Install remaining tech stack</a></li><li><a href="#set-up-opquser-ssh-access">Set up opquser ssh access</a><ul class="toc-headings"><li><a href="#obtain-the-opquser-account-credentials">Obtain the opquser account credentials</a></li><li><a href="#set-up-ssh-without-password-prompt">Set up ssh without password prompt</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/opqlogo_white.png" alt="Open Power Quality" width="66" height="58"/></a><div><h5>Documentation Quick Links</h5><a href="/docs/intro-opq.html">Overview</a><a href="/docs/userguide-hardware.html">OPQ Box User Guide</a><a href="/docs/userguide-software.html">OPQ View User Guide</a><a href="/docs/agile-power-monitoring.html">Agile Power Monitoring for UH</a><a href="/docs/roadmap.html">Roadmap</a></div><div><h5>Community</h5><a href="https://openpowerquality.slack.com/" target="_blank" rel="noreferrer noopener">Slack</a><a href="https://twitter.com/opquality" target="_blank" rel="noreferrer noopener">Twitter</a><a href="/blog">News</a><a href="http://emilia.ics.hawaii.edu">Emilia (public OPQ View)</a><a href="/contact-us.html">Contact Us</a></div><div><h5>Development</h5><a href="https://github.com/openpowerquality">GitHub</a><a href="https://github.com/openpowerquality/opq/projects/1">Project Board</a><a href="/team.html">Developer Team</a><a href="/docs/opportunities.html">Opportunities</a><a href="http://www.citeulike.org/group/3370/tag/powerquality">Publications</a></div></section><p style="text-align:center;color:#e9faff;">Open Power Quality is sponsored by:<br/><a style="text-align:center;color:#e9faff;" href="http://csdl.ics.hawaii.edu">Collaborative Software Development Laboratory, University of Hawaii</a><br/><a style="text-align:center;color:#e9faff;" href="http://www.ics.hawaii.edu">Department of Information and Computer Sciences, University of Hawaii</a><br/><a style="text-align:center;color:#e9faff;" href="http://ee.hawaii.edu">Department of Electrical Engineering, University of Hawaii</a><br/></p></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
              var search = docsearch({
                
                apiKey: '9bf16cc78135dbeeb3826894ebbbb2ee',
                indexName: 'openpowerquality',
                inputSelector: '#search_input_react'
              });
            </script></body></html>